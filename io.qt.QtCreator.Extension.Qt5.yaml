id: io.qt.QtCreator.Extension.Qt5
build-extension: true
sdk: org.freedesktop.Sdk//21.08
sdk-extensions:
  - org.freedesktop.Sdk.Extension.qt5
runtime: io.qt.QtCreator
runtime-version: master
separate-locales: false
appstream-compose: false
modules:
  - name: qt5
    buildsystem: simple
    build-commands:
      - cp -r /usr/lib/sdk/qt5/* /app/extensions/Qt5
      - cp qt.conf /app/extensions/Qt5/bin
      - /app/libexec/qtcreator/sdktool addQt --id qt5 --name Qt5 --qmake /app/extensions/Qt5/bin/qmake
        --type Qt4ProjectManager.QtVersion.Desktop
      - /app/libexec/qtcreator/sdktool addKit --id qt5 --name Qt5 --devicetype Desktop
        --device "Desktop Device" --qt qt5
    sources:
      - type: file
        name: ./qt.conf
  - name: metainfo
    buildsystem: simple
    build-commands:
      - mkdir -p ${FLATPAK_DEST}/share/metainfo
      - cp io.qt.QtCreator.Extension.Qt5.metainfo.xml ${FLATPAK_DEST}/share/metainfo
      - appstream-compose --basename=io.qt.QtCreator.Extension.Qt5 --prefix=${FLATPAK_DEST} --origin=flatpak io.qt.QtCreator.Extension.Qt5
    sources:
      - type: file
        path: io.qt.QtCreator.Extension.Qt5.metainfo.xml
